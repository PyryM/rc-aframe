<html>
  <head>
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="../js/aframe-pano-portal.min.js"></script>
    <script src="../js/videocontrol.js"></script>
    <script src="../js/waypoint.js"></script>
    <script src="https://unpkg.com/aframe-template-component@^3.1.1/dist/aframe-template-component.min.js"></script>
    <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Asset management system. -->
      <a-assets>
        <img id="exit" src="images/exit.png">
        <img id="videoicon" src="images/videoicon.png">
        <img id="pano" src="images/pano_small.jpg">
        <video id="vidconstruction" src="videos/construction.mp4"></video>
        <video id="vidwed" loop="true" src="videos/timelapse_smaller.mp4"></video>
        <video id="vidpaint" loop="true" src="videos/fcbackwall_smaller.mp4"></video>
        <video id="videntrance" loop="true" src="videos/garage_fixed.mp4"></video>
        <!-- <video id="vidgarage" loop="true" src="videos/fccourtney_smaller.mp4"></video> -->
        <!-- <video id="vidhallway" loop="true" src="videos/hallway_fixed.mp4"></video> -->
        <!-- <video id="vidinterview" loop="true" src="videos/interview_smaller.mp4"></video> -->

        <!-- <a-asset-item id="stand-obj" src="meshes/stand.obj"></a-asset-item>
        <a-asset-item id="stand-mtl" src="meshes/stand.mtl"></a-asset-item> -->

        <script id="imagesphere" type="text/html">
          <a-entity position="${x} 0.0 ${z}" waypoint="camera: #maincamera">
            <a-icosahedron detail="2" position="0.0 1.6 0.0" scale="0.49 0.49 0.49"
                      wireframe="true" color="#FFFFFF"
                      transparent="true" opacity="0.2"></a-icosahedron>
            <a-icosahedron detail="3" position="0.0 1.6 0.0" scale="-0.5 -0.5 -0.5"
                      material="shader: pano-portal; src: ${src}; warpParams: 1.0 0.5 0.15 0.05">
            </a-icosahedron>
          </a-entity>

          <a-circle position="${x} 1.11 ${z}" src="#exit" radius="0.02" color="#AABBFF" rotation="-90 0 0"
                    waypoint="camera: #maincamera; target: ${home}"></a-circle>

          <a-entity position="${x} 0.01 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.10; radiusOuter: 0.20"
                    material="color: #AABBFF; shader: flat"></a-entity>

          <a-entity position="${x} 0.0 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.07; radiusOuter: 0.23"
                    material="color: #505050; shader: flat"></a-entity>
        </script>

        <script id="videosphere" type="text/html">
          <a-entity position="${x} 0.0 ${z}" waypoint="camera: #maincamera">
            <a-icosahedron detail="2" position="0.0 1.6 0.0" scale="0.49 0.49 0.49"
                      wireframe="true" color="#FFFFFF"
                      transparent="true" opacity="0.2"></a-icosahedron>
            <a-icosahedron detail="3" position="0.0 1.6 0.0" scale="-0.5 -0.5 -0.5"
                      material="shader: pano-portal; src: ${src}; warpParams: 1.0 0.5 0.15 0.05"
                      videocontrol="src: ${src}; pos: ${x} 1.6 ${z}"></a-icosahedron>
          </a-entity>

          <a-circle position="${x} 1.11 ${z}" src="#exit" radius="0.04" color="#AABBFF" rotation="-90 0 0"
                    waypoint="camera: #maincamera; target: ${home}"></a-circle>

          <a-entity position="${x} 0.01 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.10; radiusOuter: 0.20"
                    material="color: #AABBFF; shader: flat"></a-entity>

          <a-entity position="${x} 0.0 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.07; radiusOuter: 0.23"
                    material="color: #505050; shader: flat"></a-entity>
        </script>

        <script id="videopane" type="text/html">
          <a-entity position="${x} ${y} ${z}" rotation="0 ${rot} 0">
            <a-circle material="color: #AABBFF; src: #videoicon; shader: flat" radius="1.0"
                      position="0 0 -0.01" waypoint="camera: #maincamera; target: ${home}"></a-circle>

            <a-video src="${src}" width="${width}" height="${height}"
                      videocontrol="src: ${src}; radius: ${rad}; pos: ${x} 1.6 ${z}">
            </a-video>
          </a-entity
        </script>

        <script id="navpoint" type="text/html">
          <a-entity id="${id}" position="${x} 0.0 ${z}" waypoint="camera: #maincamera">
            <a-circle position="0.0 0.01 0.0" material="color: #AABBFF; shader: flat" radius="0.40" rotation="-90 0 0"></a-circle>
            <a-circle position="0.0 0.0 0.0" material="color: #505050; shader: flat" radius="0.44" rotation="-90 0 0"></a-circle>
          </a-entity>
        </script>
      </a-assets>

      <a-sky color="gray"></a-sky>

      <!-- <a-entity obj-model="obj: #stand-obj; mtl: #stand-mtl"
                position="-14.1 -0.23 -5.11" rotation="-0.17 59.24 -0.45" scale="0.025 0.025 0.025">
      </a-entity> -->

      <!-- Camera and cursor -->
      <a-camera id="maincamera" wasd-controls look-controls mouse-cursor user-height="1.6">
      </a-camera>

      <a-obj-model rotation="-90 0 0" position="0 1.5 0" id="sus1" src="meshes/sus_low_textured.obj"
                   material="shader: flat; src: meshes/sus_low_tex.jpg"></a-obj-model>
      <a-obj-model rotation="-90 0 0" position="0 1.5 0" id="sus1" src="meshes/sus_low_untextured.obj"
                  material="shader: flat; color: gray"></a-obj-model>

      <a-entity template="src: #videopane"
        data-src="#vidpaint"
        data-x="-13.8" data-y="1.6" data-z="-9.28" data-width="6.44" data-height="4.06"
        data-rot="58.44" data-rad="6.0"
        data-home="wp2">
      </a-entity>

      <!-- <a-entity template="src: #videopane"
        data-src="#vidgarage"
        data-x="-2.20" data-y="1.123" data-z="1.821" data-width="3.8" data-height="2.39"
        data-rot="146.4" data-rad="3.0"
        data-home="wp-main">
      </a-entity> -->

      <a-entity template="src: #videopane"
        data-src="#videntrance"
        data-x="6.39" data-y="1.647" data-z="3.44" data-width="5.72" data-height="3.74"
        data-rot="-122" data-rad="3.0"
        data-home="wp3">
      </a-entity>

      <!-- <a-entity template="src: #videopane"
        data-src="#vidhallway"
        data-x="1.78" data-y="1.0" data-z="-3.0" data-width="3.2" data-height="1.8"
        data-rot="-34" data-rad="3.0">
      </a-entity> -->

      <a-entity template="src: #videosphere"
          data-x="2.0" data-z="2.0" data-src="#vidwed" data-home="wp-main"></a-entity>

      <a-entity template="src: #videosphere"
          data-x="-2.0" data-z="-2.0" data-src="#vidconstruction" data-home="wp-main"></a-entity>

      <!-- <a-entity template="src: #videosphere"
          data-x="-5.0" data-z="-6.0" data-src="#vidinterview" data-home="wp-main"></a-entity> -->

      <a-entity template="src: #imagesphere"
          data-x="-8.0" data-z="-6.0" data-src="#pano" data-home="wp-main"></a-entity>

      <a-entity template="src: #navpoint" data-id="wp-main" data-x="-1.6" data-z="-0.6"></a-entity>
      <a-entity template="src: #navpoint" data-id="wp2" data-x="-12.3" data-z="-8.5"></a-entity>
      <a-entity template="src: #navpoint" data-id="wp3" data-x="5.3" data-z="2.5"></a-entity>
      <a-entity template="src: #navpoint" data-id="wp4" data-x="-7.0" data-z="-3.0"></a-entity>


    </a-scene>
  </body>
</html>
