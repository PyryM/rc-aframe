<html>
  <head>
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="../js/pano_material.js"></script>
    <script src="../js/videocontrol.js"></script>
    <script src="https://unpkg.com/aframe-template-component@^3.1.1/dist/aframe-template-component.min.js"></script>
    <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Asset management system. -->
      <a-assets>
        <img id="pano" src="images/pano_small.jpg">
        <video id="vidconstruction" src="videos/construction.mp4"></video>
        <video id="vidwed" loop="true" src="videos/timelapse_smaller.mp4"></video>
        <video id="vidpaint" loop="true" autoplay src="videos/fcbackwall_smaller.mp4"></video>
        <video id="videntrance" loop="true" autoplay src="videos/garage_fixed.mp4"></video>
        <video id="vidgarage" loop="true" autoplay src="videos/fccourtney_smaller.mp4"></video>
        <video id="vidhallway" loop="true" autoplay src="videos/hallway_fixed.mp4"></video>

        <a-asset-item id="stand-obj" src="meshes/stand.obj"></a-asset-item>
        <a-asset-item id="stand-mtl" src="meshes/stand.mtl"></a-asset-item>

        <script id="imagesphere" type="text/html">
          <a-entity position="${x} 0.0 ${z}">
            <a-icosahedron detail="2" position="0.0 1.6 0.0" scale="0.49 0.49 0.49"
                      wireframe="true" color="#FFFFFF"
                      transparent="true" opacity="0.2"></a-icosahedron>
            <a-icosahedron detail="3" position="0.0 1.6 0.0" scale="-0.5 -0.5 -0.5"
                      material="shader: pano-warp-magic; src: ${src}; warpParams: -1.0 1.5 0.0 0.0">
            </a-icosahedron>
          </a-entity>

          <a-entity position="${x} 0.01 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.10; radiusOuter: 0.20"
                    material="color: #AABBFF; shader: flat"></a-entity>

          <a-entity position="${x} 0.0 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.07; radiusOuter: 0.23"
                    material="color: #505050; shader: flat"></a-entity>
        </script>

        <script id="videosphere" type="text/html">
          <a-entity position="${x} 0.0 ${z}">
            <a-icosahedron detail="2" position="0.0 1.6 0.0" scale="0.49 0.49 0.49"
                      wireframe="true" color="#FFFFFF"
                      transparent="true" opacity="0.2"></a-icosahedron>
            <a-icosahedron detail="3" position="0.0 1.6 0.0" scale="-0.5 -0.5 -0.5"
                      material="shader: pano-warp-magic; src: ${src}; warpParams: -1.0 1.5 0.0 0.0"
                      videocontrol="src: ${src}; pos: ${x} 1.6 ${z}"></a-icosahedron>
          </a-entity>

          <a-entity position="${x} 0.01 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.10; radiusOuter: 0.20"
                    material="color: #AABBFF; shader: flat"></a-entity>

          <a-entity position="${x} 0.0 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.07; radiusOuter: 0.23"
                    material="color: #505050; shader: flat"></a-entity>
        </script>
      </a-assets>

      <a-sky color="gray"></a-sky>

      <a-entity teleport-controls="curveShootingSpeed: 10" vive-controls="hand: left"></a-entity>
      <a-entity teleport-controls="curveShootingSpeed: 10" vive-controls="hand: right"></a-entity>

      <a-entity obj-model="obj: #stand-obj; mtl: #stand-mtl"
                position="-14.1 -0.23 -5.11" rotation="-0.17 59.24 -0.45" scale="0.025 0.025 0.025">
      </a-entity>

      <a-obj-model rotation="-90 0 0" position="0 1.5 0" id="sus1" src="meshes/sus_low_textured.obj"
                   material="shader: flat; src: meshes/sus_low_tex.jpg"></a-obj-model>
      <a-obj-model rotation="-90 0 0" position="0 1.5 0" id="sus1" src="meshes/sus_low_untextured.obj"
                  material="shader: flat; color: gray"></a-obj-model>

      <a-video src="#vidpaint" width="6.44" height="4.06" rotation="0 58.44 0"
                position="-13.8 1.6 -9.28"
                videocontrol="src: #vidpaint; radius: 3.0; pos: -13.8 1.6 -9.28">
        <a-plane color="black" width="1.1" height="0.22" position="-1.9 -1.34 0.05">
          <a-entity position="0.0 0.0 0.005" text="width: 1.0; value: Painting a wall\nIn the place; align: left; wrapCount: 20"></a-entity>
        </a-plane>
      </a-video>

      <a-video src="#vidgarage" width="3.8" height="2.39" rotation="0 146.4 0"
                position="-2.20 1.123 1.821"
                videocontrol="src: #vidgarage; radius: 3.0; pos: -2.20 1.6 1.821">
        <a-plane color="black" width="1.1" height="0.22" position="-0.8 -1.0 0.05">
          <a-entity position="0.0 0.0 0.005" text="width: 1.0; value: A meeting\nHappening Here; align: left; wrapCount: 20"></a-entity>
        </a-plane>
      </a-video>

      <a-video src="#videntrance" width="5.72" height="3.74" rotation="0 -122 0"
                position="6.39 1.647 3.44"
                videocontrol="src: #videntrance; radius: 5.0; pos: 7.591 1.6 4.262">
        <a-plane color="black" width="1.1" height="0.22" position="-2.0 -1.5 0.05">
          <a-entity position="0.0 0.0 0.005" text="width: 1.0; value: Masonry installation\nLine two; align: left; wrapCount: 20"></a-entity>
        </a-plane>
      </a-video>

      <a-video src="#vidhallway" width="3.2" height="1.8" rotation="0 -34 0"
                position="1.78 1.0 -3.0"
                videocontrol="src: #vidhallway; radius: 3.0; pos: 1.78 1.0 -3.0">
        <a-plane color="black" width="1.1" height="0.22" position="-0.6 -0.7 0.05">
          <a-entity position="0.0 0.0 0.005" text="width: 1.0; value: A meeting\nWith Courtney; align: left; wrapCount: 20"></a-entity>
        </a-plane>
      </a-video>

      <a-entity template="src: #videosphere"
          data-x="2.0" data-z="2.0" data-src="#vidwed"></a-entity>

      <a-entity template="src: #videosphere"
          data-x="-2.0" data-z="-2.0" data-src="#vidconstruction"></a-entity>

      <a-entity template="src: #imagesphere"
          data-x="-8.0" data-z="-6.0" data-src="#pano"></a-entity>

    </a-scene>
  </body>
</html>
