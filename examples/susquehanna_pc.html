<html>
  <head>
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="../js/pano_material.js"></script>
    <script src="../js/color_changer.js"></script>
    <script src="../js/videocontrol.js"></script>
    <script src="https://unpkg.com/aframe-template-component@^3.1.1/dist/aframe-template-component.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Asset management system. -->
      <a-assets>
        <img id="pano" src="images/pano_small.jpg">
        <video id="vidconstruction" src="videos/construction.mp4">
        <video id="vidwed" loop="true" src="videos/wednesday.mp4">
        <video id="vidpaint" loop="true" autoplay src="videos/painting.mp4">

        <script id="imagesphere" type="text/html">
          <a-entity position="${x} 0.0 ${z}">
            <a-icosahedron detail="2" position="0.0 1.6 0.0" scale="0.49 0.49 0.49"
                      wireframe="true" color="#FFFFFF"
                      transparent="true" opacity="0.2"></a-icosahedron>
            <a-icosahedron detail="3" position="0.0 1.6 0.0" scale="-0.5 -0.5 -0.5"
                      material="shader: pano-warp-magic; src: ${src}; warpParams: -1.0 1.5 0.0 0.0">
            </a-icosahedron>
          </a-entity>

          <a-entity position="${x} 0.01 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.10; radiusOuter: 0.20"
                    material="color: #AABBFF; shader: flat"></a-entity>

          <a-entity position="${x} 0.0 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.07; radiusOuter: 0.23"
                    material="color: #505050; shader: flat"></a-entity>
        </script>

        <script id="videosphere" type="text/html">
          <a-entity position="${x} 0.0 ${z}">
            <a-icosahedron detail="2" position="0.0 1.6 0.0" scale="0.49 0.49 0.49"
                      wireframe="true" color="#FFFFFF"
                      transparent="true" opacity="0.2"></a-icosahedron>
            <a-icosahedron detail="3" position="0.0 1.6 0.0" scale="-0.5 -0.5 -0.5"
                      material="shader: pano-warp-magic; src: ${src}; warpParams: -1.0 1.5 0.0 0.0"
                      videocontrol="src: ${src}; pos: ${x} 1.6 ${z}"></a-icosahedron>
          </a-entity>

          <a-entity position="${x} 0.01 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.10; radiusOuter: 0.20"
                    material="color: #AABBFF; shader: flat"></a-entity>

          <a-entity position="${x} 0.0 ${z}" rotation="-90 0 0"
                    geometry="primitive: ring; radiusInner: 0.07; radiusOuter: 0.23"
                    material="color: #505050; shader: flat"></a-entity>
        </script>
      </a-assets>

      <a-obj-model position="0 1.5 0" id="sus0" src="meshes/sus2_0.obj" mtl="meshes/sus2.mtl"></a-obj-model>
      <a-obj-model position="0 1.5 0" id="sus1" src="meshes/sus2_1.obj" mtl="meshes/sus2.mtl"></a-obj-model>
      <a-obj-model position="0 1.5 0" id="sus2" src="meshes/sus2_2.obj" mtl="meshes/sus2.mtl"></a-obj-model>

      <a-video src="#vidpaint" width="4" height="3" rotation="0 58.44 0"
                position="-13.8 1.6 -9.28" scale="1.611 1.354 0.976">
      </a-video>

      <a-video src="#vidwed" width="4" height="3" rotation="0 146.4 0"
                position="-2.20 1.123 1.821" scale="0.756 0.795 1">
      </a-video>

      <a-video src="#vidconstruction" width="4" height="3" rotation="0 -122 0"
                position="7.591 1.647 4.262" scale="1.429 1.246 1">
      </a-video>

      <a-entity template="src: #videosphere"
          data-x="2.0" data-z="2.0" data-src="#vidwed"></a-entity>

      <a-entity template="src: #videosphere"
          data-x="-2.0" data-z="-2.0" data-src="#vidconstruction"></a-entity>

      <a-entity template="src: #imagesphere"
          data-x="-8.0" data-z="-6.0" data-src="#pano"></a-entity>

    </a-scene>
  </body>
</html>
